# LED Controller - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏ Arduino —á–µ—Ä–µ–∑ REST API

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 12 —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏ –Ω–∞ Arduino UNO —á–µ—Ä–µ–∑ REST API —Å Swagger UI.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

### 1. Arduino —Å–∫–µ—Ç—á (`arduino_led_controller.ino`)
–£–ø—Ä–∞–≤–ª—è–µ—Ç 12 —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –∫ –ø–∏–Ω–∞–º 2-13 Arduino UNO.

**–ö–æ–º–∞–Ω–¥—ã:**
- `ON:X` - –≤–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –Ω–∞ –ø–∏–Ω–µ X
- `OFF:X` - –≤—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –Ω–∞ –ø–∏–Ω–µ X

### 2. REST API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (`led_controller_api.py`)
Flask —Å–µ—Ä–≤–µ—Ä —Å REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏.
- –•—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ (–±–µ–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
- –í–∫–ª—é—á–∞–µ—Ç Swagger UI –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:5000`

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ –∫ Arduino

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ 12 —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ –∫ –ø–∏–Ω–∞–º **2-13** Arduino UNO:
- **–ê–Ω–æ–¥ (+)** —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ ‚Üí –ø–∏–Ω Arduino —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä 220-330 –û–º
- **–ö–∞—Ç–æ–¥ (-)** —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ ‚Üí GND

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫–µ—Ç—á–∞ –Ω–∞ Arduino

1. –û—Ç–∫—Ä–æ–π—Ç–µ Arduino IDE
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª `arduino_led_controller.ino`
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç—É: **Tools ‚Üí Board ‚Üí Arduino UNO**
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Ä—Ç: **Tools ‚Üí Port ‚Üí /dev/cu.usbmodem**** (–¥–ª—è macOS)
5. –ù–∞–∂–º–∏—Ç–µ **Upload** (–∑–∞–≥—Ä—É–∑–∏—Ç—å)

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python3 -m venv venv
source venv/bin/activate  # –î–ª—è macOS/Linux
# venv\Scripts\activate  # –î–ª—è Windows

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–∞ Arduino

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `led_controller_api.py` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç Arduino:

```python
# –ù–∞–π–¥–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç
ARDUINO_PORT = '/dev/cu.usbserial-210'  # –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –ø–æ—Ä—Ç
```

**–ö–∞–∫ –Ω–∞–π—Ç–∏ –ø–æ—Ä—Ç Arduino UNO –Ω–∞ macOS:**
```bash
ls /dev/cu.*
# –ò—â–∏—Ç–µ: /dev/cu.usbmodem* –∏–ª–∏ /dev/cu.usbserial*
```

**Linux:**
```bash
ls /dev/ttyACM* /dev/ttyUSB*
# Arduino UNO –æ–±—ã—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ /dev/ttyACM0
```

**Windows:**
- –û—Ç–∫—Ä–æ–π—Ç–µ Device Manager ‚Üí Ports (COM & LPT)
- –ù–∞–π–¥–∏—Ç–µ Arduino UNO (–æ–±—ã—á–Ω–æ COM3, COM4, –∏ —Ç.–¥.)

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
python3 led_controller_api.py
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:5000`

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:**
- üé® **Swagger UI**: http://localhost:5000/swagger - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
- üìö **API Docs**: http://localhost:5000/ - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚ù§Ô∏è **Health Check**: http://localhost:5000/health - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ REST API

### Swagger UI (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: **http://localhost:5000/swagger**
2. –£–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö endpoints
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π endpoint —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å
4. –ù–∞–∂–º–∏—Ç–µ **"Try it out"**
5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
6. –ù–∞–∂–º–∏—Ç–µ **"Execute"**
7. –£–≤–∏–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–Ω–∏–∑—É!

### –ü—Ä–∏–º–µ—Ä—ã curl –∫–æ–º–∞–Ω–¥

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤
curl http://localhost:5000/leds/

# –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ 5
curl http://localhost:5000/leds/5

# –í–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥ 5
curl -X POST http://localhost:5000/leds/5/on

# –í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥ 5
curl -X POST http://localhost:5000/leds/5/off

# –í–∫–ª—é—á–∏—Ç—å –í–°–ï —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã
curl -X PUT http://localhost:5000/leds/ \
  -H "Content-Type: application/json" \
  -d '{"—Å–æ—Å—Ç–æ—è–Ω–∏–µ": "–≤–∫–ª"}'

# –í—ã–∫–ª—é—á–∏—Ç—å –í–°–ï —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã
curl -X PUT http://localhost:5000/leds/ \
  -H "Content-Type: application/json" \
  -d '{"—Å–æ—Å—Ç–æ—è–Ω–∏–µ": "–≤—ã–∫–ª"}'
```

–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ —Ñ–∞–π–ª–µ **`API_EXAMPLES.md`**!

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
newyear/
‚îú‚îÄ‚îÄ arduino_led_controller.ino  # –°–∫–µ—Ç—á –¥–ª—è Arduino
‚îú‚îÄ‚îÄ led_controller_api.py       # REST API —Å–µ—Ä–≤–µ—Ä (–Ω–æ–≤—ã–π)
‚îú‚îÄ‚îÄ led_controller.py           # –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Å MySQL (deprecated)
‚îú‚îÄ‚îÄ requirements.txt            # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ API_EXAMPLES.md             # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è REST API
‚îú‚îÄ‚îÄ wiring_diagram.txt          # –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ database_setup.sql          # SQL —Å–∫—Ä–∏–ø—Ç (–±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Arduino –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ USB
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç –≤ `led_controller_api.py`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö (9600 baud)
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–π—Ç–∏ –ø–æ—Ä—Ç: `ls /dev/cu.*` (macOS) –∏–ª–∏ `ls /dev/tty*` (Linux)

### API –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 5000 –Ω–µ –∑–∞–Ω—è—Ç: `lsof -i :5000`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: `pip list | grep -i flask`
- –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ: `source venv/bin/activate`

### –°–≤–µ—Ç–æ–¥–∏–æ–¥—ã –Ω–µ –º–µ–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–æ–≤ –∏ —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫–µ—Ç—á –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ Arduino
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ API –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç –æ—Ç Arduino –≤ Serial Monitor

### –†–µ–∂–∏–º —ç–º—É–ª—è—Ü–∏–∏
## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ù–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ REST API —Å–µ—Ä–≤–µ—Ä–∞.

## API Endpoints

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/leds/` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã |
| GET | `/leds/{id}` | –ü–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω —Å–≤–µ—Ç–æ–¥–∏–æ–¥ |
| PUT | `/leds/{id}` | –û–±–Ω–æ–≤–∏—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥ |
| POST | `/leds/{id}/on` | –í–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥ |
| POST | `/leds/{id}/off` | –í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥ |
| PUT | `/leds/` | –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã |
| GET | `/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è |
| GET | `/swagger` | Swagger UI |

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- ‚úÖ **REST API** - —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ!
- ‚úÖ **Swagger UI** - —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ!
- üé® –î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (HTML/CSS/JS)
- ‚è∞ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è
- üåà –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É PWM –¥–ª—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ —è—Ä–∫–æ—Å—Ç–∏ (–ø–∏–Ω—ã 3, 5, 6, 9, 10, 11)
- üé≠ –°–æ–∑–¥–∞—Ç—å —Å–≤–µ—Ç–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–±–µ–≥—É—â–∏–π –æ–≥–æ–Ω—å, –º–∏–≥–∞–Ω–∏–µ, –∏ —Ç.–¥.)
- üîê –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è API
- üìä –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–πython –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É PWM –¥–ª—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ —è—Ä–∫–æ—Å—Ç–∏
- –°–æ–∑–¥–∞—Ç—å REST API –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
